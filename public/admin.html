<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Dashboard</title>
<style>
body {
  background:#0a0f1a;
  color:#fff;
  font-family:Segoe UI;
}
table {
  width:100%;
  border-collapse:collapse;
}
th, td {
  padding:10px;
  border-bottom:1px solid cyan;
}
button {
  padding:6px 10px;
  background:#00ffff;
  border:none;
  cursor:pointer;
}
</style>
</head>
<body>

<h2>ðŸ›  Admin Panel</h2>

<input id="hr" placeholder="Heart Rate">
<input id="spo" placeholder="SpOâ‚‚">
<button onclick="add()">Add</button>

<table id="table">
  <tr>
    <th>ID</th>
    <th>HR</th>
    <th>SpOâ‚‚</th>
    <th>Action</th>
  </tr>
</table>

<script>
if (!localStorage.getItem("authToken")) {
  location.href = "/login.html";
}

async function load() {
  const res = await fetch("/api/get");
  const data = await res.json();

  const table = document.getElementById("table");
  data.forEach(r => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${r.id}</td>
      <td>${r.heartrate}</td>
      <td>${r.spo2}</td>
      <td>
        <button onclick="del(${r.id})">Delete</button>
      </td>
    `;
    table.appendChild(tr);
  });
}

async function add() {
  await fetch("/api/sensor", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      heartrate:+hr.value,
      spo2:+spo.value
    })
  });
  location.reload();
}

async function del(id) {
  await fetch("/api/sensor?id="+id, { method:"DELETE" });
  location.reload();
}

load();
</script>

</body>
</html>
